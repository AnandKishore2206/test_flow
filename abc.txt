import { AfterViewInit, Component, ElementRef, Input, ViewChild } from '@angular/core';

@Component({
  selector: 'app-read-more-box',
  templateUrl: './read-more-box.component.html',
  styleUrls: ['./read-more-box.component.scss']
})
export class ReadMoreBoxComponent implements AfterViewInit {
  @Input() text: string = '';
  @ViewChild('textBox') textBox!: ElementRef;

  isOverflowing: boolean = false;
  expanded: boolean = false;
  maxHeight: number = 90; // px

  ngAfterViewInit(): void {
    setTimeout(() => {
      const el = this.textBox.nativeElement;
      this.isOverflowing = el.scrollHeight > el.clientHeight;
    });
  }

  toggle() {
    this.expanded = !this.expanded;
  }
}




<div class="read-more-container">
  <div
    #textBox
    class="text-box"
    [ngClass]="{ expanded: expanded }"
    [style.maxHeight.px]="expanded ? null : maxHeight"
  >
    {{ text }}
  </div>

  <!-- Show toggle only if overflowing -->
  <div class="read-more-toggle" *ngIf="isOverflowing">
    <a (click)="toggle()">{{ expanded ? 'Show less' : 'Read more' }}</a>
  </div>
</div>




.read-more-container {
  .text-box {
    overflow: hidden;
    transition: max-height 0.3s ease;
    white-space: pre-wrap;
  }

  .text-box.expanded {
    max-height: none;
    overflow: auto;
  }

  .read-more-toggle {
    text-align: right;
    margin-top: 4px;

    a {
      cursor: pointer;
      color: #007bff;
    }
  }
}
